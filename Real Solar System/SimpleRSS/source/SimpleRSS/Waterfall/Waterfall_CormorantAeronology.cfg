@PART[CA_STME]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{
    !EFFECTS {}
    !MODULE[EngineLightEffect] {}

    EFFECTS
    {
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/KW/sound_liq4
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
            channel = Ship
            clip = sound_explosion_low
            volume = 1.0
            pitch = 2.0
            loop = false
            }
        }
        running_closed
        {
		    AUDIO
		    {
			    channel = Ship
			    clip = Waterfall/Sounds/EnsouSounds/Loop_Liquid_Medium_High_2
			    volume = 0.0 0.0
			    volume = 0.05 0.6
			    volume = 1.0 1.0
			    pitch = 0.0 0.7
			    pitch = 1.0 1.0
			    loop = true
		    }
        }
    }

    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = stmeFX
        engineID = basicEngine

        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }

        TEMPLATE
        {
            templateName = waterfall-hydrolox-rs25-1
            overrideParentTransform = STMEpivot
            position = 0,0,0.14
            rotation = 0, 0, 0
            scale = 1.5, 1.5, 1.5
        }

        TEMPLATE
        {
            templateName = stock-hydrolox-core-1
            overrideParentTransform = STMEpivot
            position = 0,0,0.14
            rotation = 0, 0, 0
            scale = 1.5, 1.5, 0.75
        }
    }
}

@PART[OMSEngine]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{
    !EFFECTS {}
    !MODULE[EngineLightEffect] {}
    !MODULE[ModuleWaterfallFX] {}

    EFFECTS
    {
        engage
        {
            AUDIO
            {
            channel = Ship
            clip = Waterfall/Sounds/KW/sound_liq4
            volume = 1.0
            pitch = 1.0
            loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        running_closed
        {
		    AUDIO
		    {
			    channel = Ship
			    clip = Waterfall/Sounds/EnsouSounds/Loop_Liquid_Medium_High_2
			    volume = 0.0 0.0
			    volume = 0.05 0.6
			    volume = 1.0 1.0
			    pitch = 0.0 0.7
			    pitch = 1.0 1.0
			    loop = true
		    }
        }
    }

    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = OMSEngineFX
        engineID = basicEngine

        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }

        TEMPLATE
        {
            templateName = stock-aerozine50-upper-1
            overrideParentTransform = thrustTransform
            position = 0,0,-0.1
            rotation = 0, 0, 0
            scale = 0.54, 0.54, 0.54
        }
    }
}

@PART[OMSEngineA]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{
    !EFFECTS {}
    !MODULE[EngineLightEffect] {}
    !MODULE[ModuleWaterfallFX] {}

    EFFECTS
    {
        engage
        {
            AUDIO
            {
            channel = Ship
            clip = Waterfall/Sounds/KW/sound_liq4
            volume = 1.0
            pitch = 1.0
            loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
            channel = Ship
            clip = sound_explosion_low
            volume = 1.0
            pitch = 2.0
            loop = false
            }
        }
        running_closed
        {
		    AUDIO
		    {
			    channel = Ship
			    clip = Waterfall/Sounds/EnsouSounds/Loop_Liquid_Medium_High_2
			    volume = 0.0 0.0
			    volume = 0.05 0.6
			    volume = 1.0 1.0
			    pitch = 0.0 0.7
			    pitch = 1.0 1.0
			    loop = true
		    }
        }
    }

    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = OMSEngineAFX
        engineID = basicEngine

        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }

        TEMPLATE
        {
            templateName = stock-aerozine50-upper-1
            overrideParentTransform = thrustTransform
            position = 0,0,-0.1
            rotation = 0, 0, 0
            scale = 0.54, 0.54, 0.54
        }
    }
}

@PART[CA_boosterPack]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{   
    MODULE
    {
	    name = ModuleWaterfallFX
	    moduleID = boosterPackFX
		 
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
	        engineID = basicEngine
	        responseRateUp = 0.03
            responseRateDown = 0.2
        }

        CONTROLLER
        {
            name = firing
            linkedTo = engineEvent
            eventName = ignition
            eventDuration = 60
            eventCurve
            {
                key = 0 0
                key = 60 1
       	    }
        }

	    TEMPLATE
	    {
		    templateName = SWESepatron
		    overrideParentTransform = thrustTransform
            position = 0,0,0.001
            rotation = 0, 0, 0
            scale = 0.12, 0.12, 0.12
	    }
    }
}


@PART[CA_SRB4]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{   
 	!EFFECTS {}

	EFFECTS
	{
		running_closed
		{
			AUDIO
			{
				channel = Ship
				clip = SimpleRSS/Waterfall/Sounds/sound_srbloop
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 1.0 1.02
				pitch = 1.0 1.0
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_veryLarge
				transformName = FX3Transform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1.5
			}
			MODEL_PARTICLE
			{
				modelName = Squad/FX/SRB_LargeSparks
				transformName = FXTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.5
				speed = 1.0 1.2
				localOffset = 0, 0, 1
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = SimpleRSS/Waterfall/Sounds/sound_srb1
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = NozzleTransform
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}

	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = SRB4FX
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
			responseRateUp = 0.1
			responseRateDown = 0.1
		}
		CONTROLLER
		{
			name = random
			linkedTo = random
			range = 0,1
		}

		TEMPLATE
        {
			templateName = SWESeaLevelPlume
			overrideParentTransform = thrustTransform
            position = 0,0,0.75
            rotation = 0, 0, 0
            scale = 1.8, 1.8, 3.82
		}
		TEMPLATE
		{
			templateName = SWECore
			overrideParentTransform = thrustTransform
            position = 0,0,0.97
            rotation = 0, 0, 0
            scale = 2.13, 2.13, 0.9
		}
		TEMPLATE
		{
			templateName = SWESmoke
			overrideParentTransform = thrustTransform
            position = 0,0,7.5
            rotation = -90, 0, 0
            scale = 28.5, 30, 28.5
		}
	}  
}

@PART[CA_SRBnose]:NEEDS[CormorantAeronology&Waterfall]:FINAL
{   
	!EFFECTS {}

	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = SRBnoseBFX
	 
    	CONTROLLER
    	{
      	    name = throttle
      	    linkedTo = throttle
	  	    engineID = basicEngine
	  	    responseRateUp = 0.03
      	    responseRateDown = 0.2
    	}
    	CONTROLLER
    	{
       	    name = firing
       	    linkedTo = engineEvent
       	    eventName = ignition
       	    eventDuration = 60
       	    eventCurve
       	    {
          	    key = 0 0
          	    key = 60 1
       		}
     	}

		TEMPLATE
		{
			templateName = SWESepatron
			overrideParentTransform = thrustTransform
            position = 0,0,-0.015
            rotation = 0, 5, 0
            scale = 0.075, 0.075, 0.12
		}
	}
}
